# TODO List

## 優先度: 高

- [ ] HTTPSサポートの追加
- [x] Keep-Alive接続のサポート（HTTP/1.1でデフォルト有効、HTTP/1.0でデフォルト無効）
- [ ] より詳細なエラーログの実装
- [ ] メモリ使用量の最適化

## 優先度: 中

- [ ] HTTP/2サポートの検討
- [ ] 圧縮転送（gzip）のサポート
- [ ] キャッシュヘッダーの実装
- [ ] レンジリクエストのサポート
- [ ] アクセスログの実装
- [ ] 設定ファイルのサポート

## 優先度: 低

- [ ] WebSocketサポート
- [ ] CGIサポート
- [ ] バーチャルホストのサポート
- [ ] ベンチマークテストの追加

## バグ修正

- [x] ヘッダーファイルの`static`変数によるwarning
- [x] `fread`の戻り値チェック
- [x] `realpath`の戻り値チェック
- [ ] 大きなファイルの転送時のメモリ使用量

## リファクタリング

- [ ] エラーハンドリングの統一
- [ ] マジックナンバーの定数化
- [ ] 関数の責務の明確化
- [ ] テストカバレッジの向上
- [x] HTTPリクエストパーサーの改善（より構造化されたアプローチに変更）

## ドキュメント

- [x] PROJECT.mdの作成
- [x] TODO.mdの作成
- [ ] API仕様書の作成
- [ ] アーキテクチャドキュメントの作成
- [ ] コントリビューションガイドラインの作成

## テスト

- [ ] ユニットテストの拡充
- [ ] 負荷テストの実装
- [ ] セキュリティテストの実装
- [ ] CI/CDパイプラインの構築

## 既知の問題

1. ~~`request_handler.c`の117行目付近のFIXMEコメント（`Connection: close`がハードコード）~~ → Keep-Alive実装により解決済み
2. バイナリファイルの読み込み時にメモリを一度に確保している（大きなファイルで問題になる可能性）
3. エラーメッセージのHTMLにタイポがある（"erver Internal Error"）

## 完了したタスク

- [x] 基本的なHTTPサーバー機能の実装
- [x] 複数のMIMEタイプのサポート
- [x] エラーページの実装
- [x] E2Eテストの実装
- [x] AddressSanitizerの導入
- [x] コンパイル時のwarning修正
- [x] Keep-Alive接続のサポート（HTTP/1.1でデフォルト有効、HTTP/1.0でデフォルト無効）
- [x] HTTPバージョン（0.9/1.0/1.1）ごとのヘッダーバリデーション機能
- [x] HTTPリクエストパーサーの改善（構造化されたアプローチへの変更）
